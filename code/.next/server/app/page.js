(()=>{var e={};e.id=931,e.ids=[931],e.modules={11185:e=>{"use strict";e.exports=require("mongoose")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},60137:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>b,pages:()=>l,routeModule:()=>f,tree:()=>d});var n=r(50482),a=r(69108),s=r(62563),o=r.n(s),i=r(68300),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);r.d(t,c);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,59680)),"/home/inosoft/Documents/project/ALXFINALPROJECT/Portfolio-Project/code/src/app/page.jsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,73414)),"/home/inosoft/Documents/project/ALXFINALPROJECT/Portfolio-Project/code/src/app/layout.js"],error:[()=>Promise.resolve().then(r.bind(r,6510)),"/home/inosoft/Documents/project/ALXFINALPROJECT/Portfolio-Project/code/src/app/error.jsx"],loading:[()=>Promise.resolve().then(r.bind(r,25536)),"/home/inosoft/Documents/project/ALXFINALPROJECT/Portfolio-Project/code/src/app/loading.jsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,10870)),"/home/inosoft/Documents/project/ALXFINALPROJECT/Portfolio-Project/code/src/app/not-found.jsx"]}],l=["/home/inosoft/Documents/project/ALXFINALPROJECT/Portfolio-Project/code/src/app/page.jsx"],b="/page",u={require:r,loadChunk:()=>Promise.resolve()},f=new n.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},22024:(e,t,r)=>{let n={"085ea23afbe1f79ea92722241c367e2f34457e8e":()=>Promise.resolve().then(r.bind(r,63618)).then(e=>e.handleLogout),"50633a6b2b7c837fa5bac1d52be8c5a6f10f40dc":()=>Promise.resolve().then(r.bind(r,63618)).then(e=>e.updatePost),"73c00ffcb152cc7e6e6892bf27ca1f7dd3853134":()=>Promise.resolve().then(r.bind(r,63618)).then(e=>e.login),"7d01890afc25905fc7fc58cc47ae2ea7ea38d43c":()=>Promise.resolve().then(r.bind(r,63618)).then(e=>e.addUser),"83b66770bbb46faa976b9a0b11a5ba957dba1a74":()=>Promise.resolve().then(r.bind(r,63618)).then(e=>e.handleGithubLogin),cc3d0dad1685d5a813afdfb674c61754ed4f3b95:()=>Promise.resolve().then(r.bind(r,63618)).then(e=>e.deleteUser),d2fb99837482f29ff68456e56434004214665788:()=>Promise.resolve().then(r.bind(r,63618)).then(e=>e.addPost),dcd26091b7b87ab99b253e551c87101fe6a0d947:()=>Promise.resolve().then(r.bind(r,63618)).then(e=>e.deletePost),e38b09b1a75bd98ac80ff08e47ef888884b96026:()=>Promise.resolve().then(r.bind(r,63618)).then(e=>e.register)};async function a(e,...t){return(await n[e]()).apply(null,t)}e.exports={"085ea23afbe1f79ea92722241c367e2f34457e8e":a.bind(null,"085ea23afbe1f79ea92722241c367e2f34457e8e"),"50633a6b2b7c837fa5bac1d52be8c5a6f10f40dc":a.bind(null,"50633a6b2b7c837fa5bac1d52be8c5a6f10f40dc"),"73c00ffcb152cc7e6e6892bf27ca1f7dd3853134":a.bind(null,"73c00ffcb152cc7e6e6892bf27ca1f7dd3853134"),"7d01890afc25905fc7fc58cc47ae2ea7ea38d43c":a.bind(null,"7d01890afc25905fc7fc58cc47ae2ea7ea38d43c"),"83b66770bbb46faa976b9a0b11a5ba957dba1a74":a.bind(null,"83b66770bbb46faa976b9a0b11a5ba957dba1a74"),cc3d0dad1685d5a813afdfb674c61754ed4f3b95:a.bind(null,"cc3d0dad1685d5a813afdfb674c61754ed4f3b95"),d2fb99837482f29ff68456e56434004214665788:a.bind(null,"d2fb99837482f29ff68456e56434004214665788"),dcd26091b7b87ab99b253e551c87101fe6a0d947:a.bind(null,"dcd26091b7b87ab99b253e551c87101fe6a0d947"),e38b09b1a75bd98ac80ff08e47ef888884b96026:a.bind(null,"e38b09b1a75bd98ac80ff08e47ef888884b96026")}},77386:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,31900,23)),Promise.resolve().then(r.t.bind(r,61476,23)),Promise.resolve().then(r.bind(r,98801))},9431:e=>{e.exports={container:"home_container__2nSFh",textContainer:"home_textContainer__1ljkg",title:"home_title__jKRy7",desc:"home_desc__ZPff_",buttons:"home_buttons__Z9C0a",button:"home_button__OGYC6",button1:"home_button1__VnacT",brands:"home_brands__5bIh_",imgContainer:"home_imgContainer__uuBJb"}},59680:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var n=r(25036),a=r(15904),s=r.n(a),o=r(9431),i=r.n(o),c=r(21689),d=r(40646),l=r.n(d);let b=()=>(0,n.jsxs)(n.Fragment,{children:[n.jsx(c.Z,{}),(0,n.jsxs)("div",{className:i().container,children:[(0,n.jsxs)("div",{className:i().textContainer,children:[n.jsx("h1",{className:i().title,children:"codeStack."}),n.jsx("p",{className:i().desc,children:"Codstack is a platform where tech people can share their expertise and insights with a community of passionate techies, such as software engineers, web designers, and programmers. It is also a place to discuss the latest and hottest topics in tech."}),(0,n.jsxs)("div",{className:i().buttons,children:[n.jsx(l(),{href:"/about",children:n.jsx("button",{className:i().button,children:"Read More"})}),n.jsx(l(),{href:"login",children:n.jsx("button",{className:i().button1,children:"Start Here"})})]}),(0,n.jsxs)("div",{className:i().brands,children:[n.jsx("h3",{children:"Brands Who love us:"}),n.jsx(s(),{src:"/brands.png",alt:"",fill:!0,className:i().brandImg})]})]}),n.jsx("div",{className:i().imgContainer,children:n.jsx(s(),{src:"/codestack.png",alt:"",width:400,height:300,className:i().heroImg})})]})]})},63618:(e,t,r)=>{"use strict";r.r(t),r.d(t,{addPost:()=>b,addUser:()=>h,deletePost:()=>u,deleteUser:()=>m,handleGithubLogin:()=>g,handleLogout:()=>p,login:()=>P,register:()=>x,updatePost:()=>f});var n=r(98601);r(75811);var a=r(43811),s=r(29560),o=r(29699),i=r(96331),c=r(30634),d=r.n(c),l=r(17824);let b=async(e,t)=>{let{title:r,desc:n,slug:i,userId:c}=Object.fromEntries(t);try{(0,o.connectToDb)();let e=new s.Post({title:r,desc:n,slug:i,userId:c});await e.save(),console.log("saved to db"),(0,a.revalidatePath)("/blog"),(0,a.revalidatePath)("/admin")}catch(e){return console.log(e),{error:"Something went wrong!"}}},u=async e=>{let{id:t}=Object.fromEntries(e);try{(0,o.connectToDb)(),await s.Post.findByIdAndDelete(t),console.log("deleted from db"),(0,a.revalidatePath)("/blog"),(0,a.revalidatePath)("/admin")}catch(e){return console.log(e),{error:"Something went wrong!"}}},f=async e=>{let{id:t}=Object.fromEntries(e);try{(0,o.connectToDb)(),await s.Post.findByIdAndUpdate(t),console.log("updated successfully"),(0,a.revalidatePath)("/blog"),(0,a.revalidatePath)("/admin")}catch(e){return console.log(e),{error:"Something went wrong!"}}},h=async(e,t)=>{let{username:r,email:n,password:i,img:c}=Object.fromEntries(t);try{(0,o.connectToDb)();let e=new s.User({username:r,email:n,password:i,img:c});await e.save(),console.log("saved to db"),(0,a.revalidatePath)("/admin")}catch(e){return console.log(e),{error:"Something went wrong!"}}},m=async e=>{let{id:t}=Object.fromEntries(e);try{(0,o.connectToDb)(),await s.Post.deleteMany({userId:t}),await s.User.findByIdAndDelete(t),console.log("deleted from db"),(0,a.revalidatePath)("/admin")}catch(e){return console.log(e),{error:"Something went wrong!"}}},g=async()=>{await (0,i.signIn)("github")},p=async()=>{await (0,i.signOut)()},x=async(e,t)=>{let{username:r,email:n,password:a,img:i,passwordRepeat:c}=Object.fromEntries(t);if(a!==c)return{error:"Passwords do not match"};try{if((0,o.connectToDb)(),await s.User.findOne({username:r}))return{error:"Username already exists"};let e=await d().genSalt(10),t=await d().hash(a,e),c=new s.User({username:r,email:n,password:t,img:i});return await c.save(),console.log("saved to db"),{success:!0}}catch(e){return console.log(e),{error:"Something went wrong!"}}},P=async(e,t)=>{let{username:r,password:n}=Object.fromEntries(t);try{await (0,i.signIn)("credentials",{username:r,password:n})}catch(e){if(console.log(e),e.message.includes("CredentialsSignin"))return{error:"Invalid username or password"};throw e}};(0,l.ensureServerEntryExports)([b,u,f,h,m,g,p,x,P]),(0,n.createActionProxy)("d2fb99837482f29ff68456e56434004214665788",b),(0,n.createActionProxy)("dcd26091b7b87ab99b253e551c87101fe6a0d947",u),(0,n.createActionProxy)("50633a6b2b7c837fa5bac1d52be8c5a6f10f40dc",f),(0,n.createActionProxy)("7d01890afc25905fc7fc58cc47ae2ea7ea38d43c",h),(0,n.createActionProxy)("cc3d0dad1685d5a813afdfb674c61754ed4f3b95",m),(0,n.createActionProxy)("83b66770bbb46faa976b9a0b11a5ba957dba1a74",g),(0,n.createActionProxy)("085ea23afbe1f79ea92722241c367e2f34457e8e",p),(0,n.createActionProxy)("e38b09b1a75bd98ac80ff08e47ef888884b96026",x),(0,n.createActionProxy)("73c00ffcb152cc7e6e6892bf27ca1f7dd3853134",P)},8805:(e,t,r)=>{"use strict";r.d(t,{authConfig:()=>n});let n={pages:{signIn:"/login"},providers:[],callbacks:{jwt:async({token:e,user:t})=>(t&&(e.id=t.id,e.isAdmin=t.isAdmin),e),session:async({session:e,token:t})=>(t&&(e.user.id=t.id,e.user.isAdmin=t.isAdmin),e),authorized({auth:e,request:t}){let r=e?.user,n=t.nextUrl?.pathname.startsWith("/admin"),a=t.nextUrl?.pathname.startsWith("/blog"),s=t.nextUrl?.pathname.startsWith("/login");return(!n||!!r?.isAdmin)&&(!a||!!r)&&(!s||!r||Response.redirect(new URL("/",t.nextUrl)))}}}},96331:(e,t,r)=>{"use strict";r.d(t,{signIn:()=>m,signOut:()=>g});var n=r(29538),a=r(24320),s=r(76714),o=r(29699),i=r(29560),c=r(30634),d=r.n(c),l=r(8805);let b=async e=>{try{(0,o.connectToDb)();let t=await i.User.findOne({username:e.username});if(!t||!await d().compare(e.password,t.password))throw Error("Wrong credentials!");return t}catch(e){throw console.log(e),Error("Failed to login!")}},{handlers:{GET:u,POST:f},auth:h,signIn:m,signOut:g}=(0,n.default)({...l.authConfig,providers:[(0,a.default)({clientId:process.env.GITHUB_ID,clientSecret:process.env.GITHUB_SECRET}),(0,s.default)({async authorize(e){try{return await b(e)}catch(e){return null}}})],callbacks:{async signIn({user:e,account:t,profile:r}){if("github"===t.provider){(0,o.connectToDb)();try{if(!await i.User.findOne({email:r.email})){let e=new i.User({username:r.login,email:r.email,image:r.avatar_url});await e.save()}}catch(e){return console.log(e),!1}}return!0},...l.authConfig.callbacks}})},29560:(e,t,r)=>{"use strict";r.d(t,{Post:()=>c,User:()=>i});var n=r(11185),a=r.n(n);let s=new(a()).Schema({username:{type:String,required:!0,unique:!0,min:3,max:20},email:{type:String,required:!0,unique:!0,max:50},password:{type:String,required:!0},img:{type:String},isAdmin:{type:Boolean,default:!1}},{timestamps:!0}),o=new(a()).Schema({title:{type:String,required:!0},desc:{type:String,required:!0},img:{type:String},userId:{type:String,required:!0},slug:{type:String,required:!0,unique:!0}},{timestamps:!0}),i=a().models?.User||a().model("User",s),c=a().models?.Post||a().model("Post",o)},29699:(e,t,r)=>{"use strict";r.d(t,{connectToDb:()=>o});var n=r(11185),a=r.n(n);let s={},o=async()=>{try{if(s.isConnected){console.log("Using existing connection");return}let e=await a().connect(process.env.MONGO);s.isConnected=e.connections[0].readyState}catch(e){throw console.log(e),Error(e)}}}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[385,406,461,485,904,298],()=>r(60137));module.exports=n})();